<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/dashboardUsuario_solicitacoes.css" rel="stylesheet">
    <link rel="shortcut icon" href="/img/square-logo-lineorange.png">
    <link rel="stylesheet" href="/css/partials/headerAreaRestritaUsuarios.css">
    <title>Solicitações</title>
</head>

<header>
    <%- include partials/headerAreaRestritaUsuarios.ejs %>
</header>

<body>
    <main>
        <div class="ordenacao">
            <div class="cronos">
                <p>Ordenar por:</p>
                <select name="ordCronologica" id="ordCronologica" class="dropdown">
                    <option value="mais nova a mais antiga">Mais nova a mais antiga</option>
                    <option value="mais antiga a mais nova">Mais antiga a mais nova</option>
                </select>
            </div>
            <p>Filtrar solicitações: </p>
            <select name="filtro" id="filtro" class="dropdown">
                <option value="imagens postadas">Imagens postadas </option>
                <option value="fotografo editando">Fotógrado está editando as imagens</option>
                <option value="sessao em andamento">Sessão em andamento</option>
                <option value="sessao agendada">Sessão agendada</option>
            </select>
        </div>
        
        
        <% for (solicitacao of solicitacoes) { %> 
            <% if(solicitacao.statusServico != 'Serviço cancelado'){ %> 
                <div class="containerServico">
                    <div class="containerEsquerda">
                        <div class="servicoContratado1">
                            <h2>Número serviço: <%=solicitacao.idServico%></h2>
                        
                            <div class="info">
                                <p class="tipo1">Endereço:</p>
                                <p><%=solicitacao.endereco%> </p>
                            </div>
                            <div class="info">
                                <p class="tipo1">Valor do serviço:</p>
                                <p>R$ <%=solicitacao.valorDoServico%> </p>
                            </div>
                            <div class="info">
                                <p class="tipo1">Tamanho aproximado do imóvel:</p>
                                <p><%=solicitacao.tamanhoImovel%>  m²</p>
                            </div>
                            <div class="info">
                                <p class="tipo1">Data do serviço</p>
                                <p><%=solicitacao.dataServico%> </p>
                            </div>
                        </div>
            
                        <div class="servicoContratado2">
                            <br>
                            <div class="info"> 
                                <p class="tipo1">Serviços contratados:</p>
                                <p><%=solicitacao.servicosContratados%> </p>
                            </div>
                        </div>
                    </div>   
                    <div class="containerDireita">
                        <div class="status">
                            <div class="fases">
                                <p>Sessão agendada</p>
                                <p>Sessão em andamento</p>
                                <p>Imagens em edição</p>
                                <p>Imagens postadas</p>
                            </div> 
                        </div>

                        <div class="farol">
                            <div class="bolinhas">
                                <%if(solicitacao.statusServico == 'Sessão agendada' ||solicitacao.statusServico == 'Sessão em andamento' ||solicitacao.statusServico == 'Imagens em edição' ||solicitacao.statusServico == 'Imagens postadas') { %>
                                    <div class = "bolaOk"> 1 </div>
                                <% }else{ %> 
                                    <div class = "bola"> 1 </div>
                                <% } %> 
                                <%if(solicitacao.statusServico == 'Sessão em andamento' || solicitacao.statusServico =='Imagens em edição' || solicitacao.statusServico =='Imagens postadas') { %>
                                    <div class = "bolaOk"> 2 </div>
                                <% }else{ %> 
                                    <div class = "bola"> 2 </div>
                                <% } %> 
                                <%if(solicitacao.statusServico == 'Imagens em edição' || solicitacao.statusServico =='Imagens postadas') { %>
                                    <div class = "bolaOk"> 3 </div>
                                <% }else{ %> 
                                    <div class = "bola"> 3 </div>
                                <% } %> 
                                <%if(solicitacao.statusServico == 'Imagens postadas') { %>
                                    <div class = "bolaOk"> 4 </div>
                                <% }else{ %> 
                                    <div class = "bola"> 4 </div>
                                <% } %>     
                            </div>
                            <div class="linha">  </div>
                        </div>
                        <%if(solicitacao.statusServico == 'Imagens postadas') { %>
                            <div class="botoes">
                                <form>
                                    <div class="prestador">
                                        <a href="dashboardUsuario_modalInfoPrestador.html"> Informações prestador</a>
                                    </div>
                                </form>
                                <form>
                                    <div class="entregaveis">
                                        <a href="/dashboardUsuario/entregaveis/<%=solicitacao.idServico%>"> Ver entregáveis </a>
                                    </div>
                                </form>
                            </div>
                        <% } else { %> 
                            <div class="botoes">
                                <form>
                                    <div class="prestador">
                                        <a href="dashboardUsuario_modalInfoPrestador.html"> Informações prestador</a>
                                    </div>
                                </form>
                            </div>
                            <% if (solicitacao.statusServico == 'Sessão agendada' ) { %>
                                <div class="rodape">
                                    <p>Ocorreu algum imprevisto e precisa cancelar? </p>
                                    <button class="cancelamento">Clique aqui</button>
                                </div>
                            <% } %> 
                        <% } %> 
                    </div>
                </div>
            <% } else { %>
                <div class="containerServicoCancelado">
                    <div class="containerEsquerda">
                        <div class="servicoContratado1">
                            <h2>Número serviço: <%=solicitacao.idServico%></h2>
                            <h3>CANCELADO</h3>
                            <div class="info">
                                <p class="tipo1">Endereço:</p>
                                <p><%=solicitacao.endereco%></p>
                            </div>
                            <div class="info">
                                <p class="tipo1">Valor do serviço:</p>
                                <p>R$ <%=solicitacao.valorDoServico%></p>
                            </div>
                            <div class="info">
                                <p class="tipo1">Tamanho aproximado do imóvel:</p>
                                <p><%=solicitacao.tamanhoImovel%> m²</p>
                            </div>
                            <div class="info">
                                <p class="tipo1">Data do serviço</p>
                                <p><%=solicitacao.dataServico%></p>
                            </div>
                            
                        </div>
        
                        <div class="servicoContratado2">
                            <br>
                            <div class="info">
                                <p class="tipo1">Serviços contratados:</p>
                                <p><%=solicitacao.servicosContratados%></p>
                            </div>
                        </div>
                    </div>
                
                    <div class="containerDireita">
                        <div class="status">
                            <div class="fases">
                                <p>Sessão agendada</p>
                                <p>Sessão em andamento</p>
                                <p>Imagens em edição</p>
                                <p>Imagens postadas</p>
                            </div> 
                        </div>
        
                        <div class="farol">
                            <div class="bolinhas">
                                <div class="bola"> 1 </div>
                                <div class="bola"> 2 </div>
                                <div class="bola"> 3 </div>
                                <div class="bola"> 4 </div>     
                            </div>
                            <div class="linha">  </div>
                        </div>
                        <div class="botoes">
                            <div class="remarcacao">
                                <a href="/orcamento"> Gostaria de remarcar minha sessão</a>
                            </div>
                        </div>
                    </div>
                </div>
            <% } %> 
        <% } %>

</body>
</html>